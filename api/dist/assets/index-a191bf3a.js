import{c as f,s as y,g,n as x,p as j,d as p,r as d,j as t,L as m,b as v}from"./index-83468cb0.js";import{u as N,s as S,a as w}from"./api-662cbdf2.js";class R extends f{constructor(e,s){super(),this.client=e,this.setOptions(s),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const s=this.options;this.options=this.client.defaultMutationOptions(e),y(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){if(!this.listeners.length){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const s={listeners:!0};e.type==="success"?s.onSuccess=!0:e.type==="error"&&(s.onError=!0),this.notify(s)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,s){return this.mutateOptions=s,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:g(),s={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=s}notify(e){x.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var s,i,l,a;(s=(i=this.mutateOptions).onSuccess)==null||s.call(i,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(l=(a=this.mutateOptions).onSettled)==null||l.call(a,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var n,o,c,u;(n=(o=this.mutateOptions).onError)==null||n.call(o,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(c=(u=this.mutateOptions).onSettled)==null||c.call(u,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(h=>{h(this.currentResult)})})}}function C(r,e,s){const i=j(r,e,s),l=p({context:i.context}),[a]=d.useState(()=>new R(l,i));d.useEffect(()=>{a.setOptions(i)},[a,i]);const n=N(d.useCallback(c=>a.subscribe(x.batchCalls(c)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),o=d.useCallback((c,u)=>{a.mutate(c,u).catch(M)},[a]);if(n.error&&S(a.options.useErrorBoundary,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}function M(){}const k=()=>{const r=p();return C({mutationFn:e=>w.posts.create(e),onSuccess:()=>{r.invalidateQueries(["POSTS"])}})},E=({children:r,title:e,btnTitle:s,setShow:i,show:l})=>{const a=()=>i(!0);return t.jsxs(t.Fragment,{children:[t.jsx("label",{onClick:a,className:"btn btn-primary normal-case",children:s}),t.jsx("div",{className:`modal modal-bottom ${l&&"modal-open"} w-full h-screen sm:modal-middle`,children:t.jsxs("div",{className:"modal-box",children:[t.jsx("h3",{className:"font-bold text-lg",children:e}),t.jsx("div",{className:"py-4",children:r})]})})]})},O=({model:r,prompt:e,image:s})=>{const[i,l]=d.useState(!1),{mutate:a,isLoading:n,error:o}=k(),c=u=>{u.preventDefault();const{imageName:h}=u.target;a({name:h.value,modelo:r,prompt:e,baseImage:s},{onSuccess:()=>{h.value="",l(!1)}})};return t.jsx(E,{title:"Save to Gallery",btnTitle:"Save to Gallery",show:i,setShow:l,children:t.jsxs("form",{className:"flex flex-col justify-start items-center w-full gap-4",onSubmit:c,children:[o&&t.jsx("p",{className:"mb-1 text-error",children:o.response.data.error}),t.jsx("input",{type:"text",className:"w-full rounded-xl p-4 bg-black bg-opacity-10 backdrop-blur-md",placeholder:"Give it a name",name:"imageName",required:!0}),t.jsxs("div",{className:"flex gap-4 items-center",children:[t.jsx("button",{type:"button",className:"btn btn-secondary normal-case",onClick:()=>l(!1),disabled:n,children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary normal-case",disabled:n,children:n?t.jsx(m,{}):"Submit"})]})]})})},G="_container_1ab5h_1",L="_fadein_1ab5h_1",P="_body_1ab5h_13",b={container:G,fadein:L,body:P},T=({modelo:r,image:e,prompt:s,name:i,imageId:l})=>{const[,a]=v(),n=()=>{a({imageId:l})};return t.jsxs("div",{className:`${b.container} rounded-lg shadow-xl cursor-pointer`,onClick:n,children:[t.jsx("img",{className:"w-full h-full object-cover rounded-lg",src:e,alt:`Generate image by ${r} with prompt ${s}`}),t.jsxs("div",{className:`${b.body} bg-black bg-opacity-80 p-4 flex flex-col justify-start gap-1 absolute top-0 left-0 w-full h-full rounded-lg`,children:[t.jsx("h2",{className:"text-xl capitalize text-primary text-opacity-90",children:i}),t.jsx("p",{className:"text-md font-semibold  text-secondary text-opacity-90",children:r}),t.jsx("p",{className:"text-md capitalize font-semibold text-secondary text-opacity-90 overflow-hidden",children:s})]})]})},U=({image:r,prompt:e,model:s})=>t.jsxs("div",{className:"card card-compact shadow-xl",children:[t.jsx("figure",{children:t.jsx("img",{src:`data:image/png;base64,${r}`,alt:`Generate image by ${s} with prompt ${e}`,className:"max-h-[500px]"})}),t.jsxs("div",{className:"card-body",children:[t.jsx("h2",{className:"card-title",children:s}),t.jsx("p",{children:e}),t.jsx("div",{className:"card-actions justify-end",children:t.jsx(O,{image:r,prompt:e,model:s})})]})]}),z=()=>t.jsx("div",{className:"bg-gray-300 w-[100%] min-h-[241px] max-h-[370px] animate-pulse rounded-lg",children:t.jsx(m,{height:"100%"})}),A=({message:r})=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"card card-compact shadow-xl",children:[t.jsx("figure",{children:t.jsx("div",{className:"bg-gray-300 w-[100%] h-[500px] animate-pulse rounded-lg",children:t.jsx(m,{height:"100%",message:r})})}),t.jsxs("div",{className:"card-body",children:[t.jsx("h2",{className:"card-title w-[100%] h-7 bg-gray-300 animate-pulse rounded-lg"}),t.jsx("p",{className:"w-[100%] h-4 bg-gray-300 animate-pulse rounded-lg"}),t.jsx("p",{className:"w-[80%] h-4 bg-gray-300 animate-pulse rounded-lg"}),t.jsx("div",{className:"card-actions justify-end",children:t.jsx("button",{className:"btn btn-primary w-[100px] animate-pulse"})})]})]})});export{U as C,A as S,z as a,T as b,C as u};
